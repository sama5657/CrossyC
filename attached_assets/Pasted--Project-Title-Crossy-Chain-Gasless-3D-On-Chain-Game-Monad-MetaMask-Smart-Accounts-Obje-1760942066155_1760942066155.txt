ğŸ§© Project Title

Crossy Chain â€” Gasless 3D On-Chain Game (Monad Ã— MetaMask Smart Accounts)

ğŸ¯ Objective

Transform the existing HTML/Three.js Crossy Road clone into a fully decentralized dApp running on Monad Testnet, using MetaMask Smart Accounts (via the Delegation Toolkit SDK) to record each playerâ€™s best score on-chain, preferably through gasless (sponsored) transactions.

Deliver a judge-ready submission for the MetaMask Ã— Monad Dev Cook-Off, including a working demo, GitHub repo, deployment scripts, and documentation.

ğŸ§± Scope
âœ… In Scope

Integrate MetaMask Smart Accounts client-side.

Add on-chain score tracking via a ScoreStore Solidity contract.

Ensure all interactions occur on Monad Testnet (chainId 10143).

Support gasless or Paymaster-sponsored transactions.

Preserve original gameplay and visuals.

Provide complete build, deployment, and demo documentation.

âŒ Out of Scope

Major redesign of game graphics or physics.

Backend leaderboard API (optional future feature).

Cross-chain bridge (only single-chain demo).

âš™ï¸ System Architecture
Player  â”€â–º  Browser UI (Three.js Game)
          â”‚
          â–¼
  MetaMask Smart Account Client
  (Delegation Toolkit SDK + Viem)
          â”‚
          â–¼
  Monad Testnet  (RPC: https://testnet-rpc.monad.xyz/)
          â”‚
          â–¼
  ScoreStore Contract  (Solidity)
          â”‚
          â–¼
  Block Explorer: https://testnet.monadexplorer.com/

Data Flow

User connects wallet â†’ Delegation Toolkit creates Smart Account.

Game session â†’ Player earns score.

Game Over â†’ JS calls saveScore(score) â†’ Smart Account sends txn to contract.

Transaction mined â†’ Score recorded on-chain, explorer link shown.

ğŸ’» Tech Stack
Layer	Technology	Purpose
Frontend	HTML5 + CSS3 + Three.js	Existing game rendering
Web3 SDK	@metamask/delegation-toolkit, viem	Smart Account integration
Blockchain	Monad Testnet (chainId 10143)	On-chain storage
Smart Contract	Solidity 0.8.20 + Hardhat	Score tracking
Deployment	Hardhat + dotenv	Contract deployment
Hosting	Vercel / Netlify / Static Server	Frontend hosting
ğŸ”— Monad Network Details (Confirmed)
Parameter	Value
Network Name	Monad Testnet
RPC URL	https://testnet-rpc.monad.xyz/
Chain ID	10143 (0x279f)
Currency	MON
Explorer	https://testnet.monadexplorer.com/
ğŸ§  Functional Requirements
ID	Feature	Description
F-01	Connect Wallet	Button to connect MetaMask Smart Account using Delegation Toolkit.
F-02	Display Smart Account	Show the generated Smart Account address on screen.
F-03	Save Score	On game over, call saveScore(uint256) via Smart Account.
F-04	Gasless TX (optional)	Integrate sponsored Paymaster logic or note fallback (user pays test MON).
F-05	View on Explorer	Provide link to https://testnet.monadexplorer.com/tx/<hash> after txn.
F-06	Persistent High Score	Contract must only update if new score > stored score.
F-07	Responsive UI	Retain original mobile controls & styling.
ğŸ§¾ Non-Functional Requirements

Performance: maintain â‰¥ 60 FPS gameplay.

Security: validate score before submission; prevent arbitrary score injection.

Compatibility: Chrome/Edge â‰¥ v120 with MetaMask v11+.

Scalability: Smart Contract must handle â‰¥ 10 k players.

Gas: < 0.01 MON per save.

ğŸ§° Deliverables & Folder Structure
crossy-chain/
â”‚
â”œâ”€ index.html            # Updated UI, Connect Wallet button, ESM imports
â”œâ”€ script.js             # Game + saveScore integration
â”œâ”€ style.css             # Minor UI spacing
â”‚
â”œâ”€ web3/
â”‚   â”œâ”€ contracts/
â”‚   â”‚   â””â”€ ScoreStore.sol
â”‚   â”œâ”€ scripts/
â”‚   â”‚   â””â”€ deploy.js
â”‚   â””â”€ hardhat.config.js
â”‚
â”œâ”€ .env.example
â”œâ”€ package.json
â”œâ”€ README.md
â””â”€ demo/ (optional assets)

ğŸ§© Smart Contract Specification
ScoreStore.sol
// SPDX-License-Identifier: MIT
pragma solidity ^0.8.20;

contract ScoreStore {
    mapping(address => uint256) public scores;
    event ScoreSaved(address indexed player, uint256 score);

    function saveScore(uint256 _score) external {
        require(_score > scores[msg.sender], "Lower score");
        scores[msg.sender] = _score;
        emit ScoreSaved(msg.sender, _score);
    }

    function getScore(address _player) external view returns (uint256) {
        return scores[_player];
    }
}

ğŸ§© Frontend Integration Details
Connect Wallet Flow
import { createSmartAccountClient } from "https://esm.sh/@metamask/delegation-toolkit@latest";
import { encodeFunctionData, http, defineChain } from "https://esm.sh/viem@1.0.0";

const monad = defineChain({
  id: 10143,
  name: "Monad Testnet",
  rpcUrls: { default: { http: ["https://testnet-rpc.monad.xyz/"] } },
});

let client, smartAccount;
async function connectWallet() {
  client = await createSmartAccountClient({ chain: monad, transport: http() });
  smartAccount = await client.getSmartAccount();
  document.getElementById("walletAddress").innerText = smartAccount.address;
}

Save Score Function
async function saveScore(score) {
  const CONTRACT_ADDRESS = "REPLACE_WITH_DEPLOYED_ADDRESS";
  const tx = await client.sendTransaction({
    to: CONTRACT_ADDRESS,
    data: encodeFunctionData({
      abi: [{ name: "saveScore", type: "function", inputs: [{ name: "_score", type: "uint256" }] }],
      args: [score],
    }),
  });
  alert(`Score saved! Tx: ${tx}`);
}

Hook Into Game Logic

In script.js, right after the â€œgame overâ€ detection:

if (typeof saveScore === "function") {
  saveScore(currentLane);  // currentLane = player's score
}

ğŸ§± Hardhat Configuration (web3/hardhat.config.js)
require("@nomicfoundation/hardhat-toolbox");
require("dotenv").config();

module.exports = {
  solidity: "0.8.20",
  networks: {
    monad: {
      url: process.env.MONAD_RPC || "https://testnet-rpc.monad.xyz/",
      chainId: 10143,
      accounts: process.env.PRIVATE_KEY ? [process.env.PRIVATE_KEY] : [],
    },
  },
};

.env.example
PRIVATE_KEY=0xYOUR_PRIVATE_KEY
MONAD_RPC=https://testnet-rpc.monad.xyz/

ğŸ§± Deployment Steps

Install

npm install --save-dev hardhat @nomicfoundation/hardhat-toolbox dotenv


Compile

npx hardhat compile


Deploy

npx hardhat run web3/scripts/deploy.js --network monad


Update frontend

Copy printed contract address into index.html â†’ CONTRACT_ADDRESS.

ğŸ§­ Testing & Validation
Test ID	Scenario	Expected Result
T-01	Connect Wallet	Smart Account address displayed
T-02	Play Game â†’ Game Over	â€œScore savedâ€ alert with tx hash
T-03	View on Explorer	Link opens testnet.monadexplorer.com/tx/...
T-04	Submit Lower Score	Rejected by contract
T-05	No Wallet â†’ Save Score	Prompt user to connect
ğŸ§ª QA Checklist

 Game loads properly on desktop and mobile.

 Smart Account creation works.

 Tx hash visible in alert/console.

 Contract state updates on explorer.

 UI responsive.

ğŸ§  Milestones & Timeline
Milestone	Description	Duration
M0	Project setup, Hardhat init	0.5 day
M1	Contract build + deploy	1 day
M2	Frontend integration	1.5 days
M3	Testing + debug	1 day
M4	Demo recording + submission	0.5 day

Total: â‰ˆ 4â€“5 days end-to-end.

ğŸ§© Demo Video Script

Intro (5 sec) â€“ â€œThis is Crossy Chain, a MetaMask Smart Account game on Monad Testnet.â€

Connect Wallet (10 sec) â€“ Click Connect Wallet â†’ show Smart Account address.

Gameplay (15 sec) â€“ Player moves chicken â†’ collect points.

Game Over (10 sec) â€“ Alert shows â€œScore saved! Tx 0xâ€¦â€.

Explorer (10 sec) â€“ Open link to https://testnet.monadexplorer.com/tx/<hash> showing score save.

Outro (5 sec) â€“ â€œGasless gameplay powered by MetaMask Smart Accounts on Monad.â€

ğŸ›¡ï¸ Security & Best Practices

Never expose private keys in the frontend.

Contract keeps minimal logic â€” no external calls.

Use require(_score > scores[msg.sender]) to prevent score downgrades.

Sanitize UI inputs.

Document that txs occur on testnet only.

ğŸ§© Future Extensions

Leaderboard Contract â€” aggregate all scores.

NFT Rewards â€” mint NFT badge for high scores.

Cross-chain replay via another testnet.

Paymaster Service for true gasless transactions.

ğŸ Acceptance Criteria

âœ… Connect Wallet creates Smart Account
âœ… Game plays without lag
âœ… On-chain score recorded and visible in explorer
âœ… Repo builds and deploys without error
âœ… README contains clear setup instructions
âœ… Demo video meets event criteria